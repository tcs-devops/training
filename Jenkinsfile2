pipeline {
    agent any
    
    tools{
      maven 'm3'
      }
      
    stages {
        stage("Build") {
            steps {
                echo "Building"
                echo "Building finished"
                
                    
            }
        }
        
        stage("Checkout") {
            steps {
            checkout ([$class: 'GitSCM',
            branches: [[name: '*/master' ]],
            userRemoteConfigs: [[url: 'https://github.com/jenkins-docs/simple-java-maven-app.git']]])
                
            }
        }
        
        stage("Deployment") {
            steps{
                sh 'mvn clean install'
           
                
            }
        }
        stage('Test') {
          
          steps{ 
                   sh 'mvn test'
          }
                     post {
                            always {
                                  junit 'target/surefire-reports/*.xml'
          }
       }  
      }                            
    }    
  post{
     always {
       testNG()
       }
        
    }
}
